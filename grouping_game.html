<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chinese Vocabulary Grouping Game</title>
<style>
  :root{
    --bg:#f6f7fb;
    --card:#ffffff;
    --accent:#d9534f;
    --ok:#28a745;
    --no:#dc3545;
    --text:#222;
    --muted:#666;
  }
  body{font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text); margin:20px;}
  .wrap{max-width:1000px;margin:0 auto;}
  h1{margin:0 0 8px;font-size:22px}
  p.lead{margin:0 0 16px;color:var(--muted)}
  .board{display:flex;gap:18px;flex-wrap:wrap;align-items:flex-start;}
  .left{flex:1 1 360px;min-width:320px;}
  .right{flex:1 1 580px;min-width:320px;}
  .tray{background:linear-gradient(#fff,#f8f9fc);padding:12px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.06);}
  .tray h3{margin:0 0 8px;font-size:16px}
  .cards{display:flex;flex-wrap:wrap;gap:10px}
  .card{
    width:160px;padding:10px;border-radius:8px;background:var(--card);box-shadow:0 2px 6px rgba(0,0,0,0.06);
    cursor:grab; user-select:none;
    border:2px solid transparent; transition:transform .12s, box-shadow .12s;
  }
  .card:active{cursor:grabbing; transform:scale(.98)}
  .card .chi{font-size:20px;font-weight:700;margin-bottom:6px}
  .card .pinyin{color:var(--muted);font-size:13px;margin-bottom:6px}
  .card .eng{font-size:13px;color:#333}
  .dropzones{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
  .zone{
    flex:1 1 30%;min-width:200px;min-height:220px;padding:12px;border-radius:8px;
    background:linear-gradient(#fff,#fbfbff);border:2px dashed #d9dcec; box-shadow:inset 0 1px 0 rgba(255,255,255,0.7);
  }
  .zone h4{margin:0 0 8px;font-size:15px}
  .zone .hint{color:var(--muted);font-size:13px;margin-bottom:8px}
  .zone .dropped{display:flex;flex-direction:column;gap:8px;min-height:120px}
  .zone.correct{border-color:var(--ok)}
  .zone.wrong{border-color:var(--no)}
  .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  button{background:#2b6cff;color:#fff;border:0;padding:8px 12px;border-radius:6px;cursor:pointer}
  button.secondary{background:#6c757d}
  button.warn{background:var(--accent)}
  .result{margin-top:12px;font-weight:700}
  .small{font-size:13px;color:var(--muted);margin-top:6px}
  footer{margin-top:18px;color:var(--muted);font-size:13px}
  @media (max-width:740px){.card{width:48%;}}
</style>
</head>
<body>
<div class="wrap">
  <h1>Chinese Vocabulary Grouping Game</h1>
  <p class="lead">把卡片拖到正确的分类里：<strong>动词 (Verbs)</strong>、<strong>食物 (Foods)</strong> 或 <strong>饮料 (Drinks)</strong>。完成后点“Check Answers”。</p>

  <div class="board">
    <div class="left">
      <div class="tray">
        <h3>词汇卡片（拖动这些卡片）</h3>
        <div class="cards" id="cards"></div>
        <div class="controls">
          <button id="shuffleBtn">Shuffle</button>
          <button id="resetBtn" class="secondary">Reset</button>
          <button id="checkBtn" class="warn">Check Answers</button>
        </div>
        <div class="result" id="result"></div>
        <div class="small">提示：你也可以把卡片拖回上方区域以重新分组。</div>
      </div>
    </div>

    <div class="right">
      <div class="tray">
        <h3>分类区（将卡片拖到下面）</h3>
        <div class="dropzones">
          <div class="zone" data-cat="verb" id="zone-verb">
            <h4>动词 (Verbs)</h4>
            <div class="hint">例：吃、喝、喜欢、不、爱</div>
            <div class="dropped" id="d-verb"></div>
          </div>

          <div class="zone" data-cat="food" id="zone-food">
            <h4>食物 (Foods)</h4>
            <div class="hint">例：米饭、面条、汉堡、比萨、水果</div>
            <div class="dropped" id="d-food"></div>
          </div>

          <div class="zone" data-cat="drink" id="zone-drink">
            <h4>饮料 (Drinks)</h4>
            <div class="hint">例：牛奶、茶、咖啡、水、果汁</div>
            <div class="dropped" id="d-drink"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>保存本页为 HTML 文件并在浏览器中打开即可使用。需要我把这个页面做成可上传到学校服务器的版本吗？</footer>
</div>

<script>
/* 词汇数据（key 对应正确分类: verb / food / drink） */
const items = [
  { id: 'eat', chi: '吃', pin: 'chī', eng: 'to eat', cat:'verb' },
  { id: 'drink', chi: '喝', pin: 'hē', eng: 'to drink', cat:'verb' },
  { id: 'like', chi: '喜欢', pin: 'xǐ huān', eng: 'to like', cat:'verb' },
  { id: 'not', chi: '不', pin: 'bù', eng: 'not / no', cat:'verb' },
  { id: 'love', chi: '爱', pin: 'ài', eng: 'to love', cat:'verb' },

  { id: 'rice', chi: '米饭', pin: 'mǐfàn', eng: 'rice', cat:'food' },
  { id: 'noodles', chi: '面条', pin: 'miàntiáo', eng: 'noodles', cat:'food' },
  { id: 'fruit', chi: '水果', pin: 'shuǐguǒ', eng: 'fruit', cat:'food' },
  { id: 'burger', chi: '汉堡', pin: 'hànbǎo', eng: 'hamburger', cat:'food' },
  { id: 'pizza', chi: '比萨', pin: 'bǐsà', eng: 'pizza', cat:'food' },

  { id: 'milk', chi: '牛奶', pin: 'niúnǎi', eng: 'milk', cat:'drink' },
  { id: 'tea', chi: '茶', pin: 'chá', eng: 'tea', cat:'drink' },
  { id: 'coffee', chi: '咖啡', pin: 'kāfēi', eng: 'coffee', cat:'drink' },
  { id: 'water', chi: '水', pin: 'shuǐ', eng: 'water', cat:'drink' },
  { id: 'juice', chi: '果汁', pin: 'guǒzhī', eng: 'juice', cat:'drink' }
];

/* 创建卡片并插入到卡片区 */
const cardsContainer = document.getElementById('cards');

function createCard(item){
  const el = document.createElement('div');
  el.className = 'card';
  el.draggable = true;
  el.id = 'card-'+item.id;
  el.dataset.cat = item.cat;
  el.innerHTML = `<div class="chi">${item.chi}</div>
                  <div class="pinyin">${item.pin}</div>
                  <div class="eng">${item.eng}</div>`;
  el.addEventListener('dragstart', onDragStart);
  el.addEventListener('dragend', onDragEnd);
  return el;
}

let currentItems = [...items]; // 初始顺序复制

function renderCards(){
  cardsContainer.innerHTML = '';
  currentItems.forEach(it=> cardsContainer.appendChild(createCard(it)));
}

/* Drag & Drop handlers */
let draggedId = null;
function onDragStart(e){
  draggedId = this.id;
  e.dataTransfer.setData('text/plain', this.id);
  setTimeout(()=> this.style.opacity = '0.6', 0);
}
function onDragEnd(e){
  this.style.opacity = '1';
  draggedId = null;
}

/* zones */
const zones = document.querySelectorAll('.zone');
zones.forEach(z=>{
  z.addEventListener('dragover', ev=> ev.preventDefault());
  z.addEventListener('drop', onDrop);
});

function onDrop(e){
  e.preventDefault();
  const cardId = e.dataTransfer.getData('text/plain');
  const card = document.getElementById(cardId);
  if(!card) return;
  const zone = this.querySelector('.dropped');
  zone.appendChild(card);
}

/* Shuffle & Reset */
function shuffleArray(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
}
document.getElementById('shuffleBtn').addEventListener('click', ()=>{
  shuffleArray(currentItems);
  renderCards();
});

document.getElementById('resetBtn').addEventListener('click', resetAll);

function resetAll(){
  // clear dropped zones
  document.querySelectorAll('.dropped').forEach(d=>{
    while(d.firstChild) d.removeChild(d.firstChild);
  });
  // re-render cards area (shuffle to mix)
  currentItems = [...items];
  renderCards();
  document.getElementById('result').textContent = '';
  zones.forEach(z=> { z.classList.remove('correct','wrong'); });
}

/* Check answers */
document.getElementById('checkBtn').addEventListener('click', checkAnswers);

function checkAnswers(){
  let correctCount = 0;
  let total = items.length;

  // reset zone styles
  zones.forEach(z=> { z.classList.remove('correct','wrong'); });

  // iterate each zone and its children
  const mapping = {
    'zone-verb': 'verb',
    'zone-food': 'food',
    'zone-drink': 'drink'
  };

  // Build a reverse map of cardId -> cardObj
  const idToObj = {};
  items.forEach(it => idToObj['card-'+it.id]=it);

  // For each zone, check children
  Object.keys(mapping).forEach(zoneId=>{
    const zoneEl = document.getElementById(zoneId);
    const expectedCat = mapping[zoneId];
    const dropped = zoneEl.querySelectorAll('.dropped .card');
    let zoneAllCorrect = true;
    dropped.forEach(card=>{
      const obj = idToObj[card.id];
      if(obj && obj.cat === expectedCat){
        correctCount++;
        card.style.borderColor = 'var(--ok)';
      }else{
        zoneAllCorrect = false;
        card.style.borderColor = 'var(--no)';
      }
    });
    if(dropped.length === 0){
      // no cards -> neutral
      zoneEl.classList.remove('correct','wrong');
    } else {
      if(zoneAllCorrect) zoneEl.classList.add('correct');
      else zoneEl.classList.add('wrong');
    }
  });

  // Also count cards left in the tray area as incorrect
  const remaining = document.querySelectorAll('#cards .card').length;
  // remaining cards are considered incorrect/unplaced
  const score = Math.round((correctCount / total) * 100);
  document.getElementById('result').textContent = `Score: ${correctCount}/${total} (${score}%) — ${remaining} card(s) unplaced.`;
}

/* initial render */
renderCards();
</script>
</body>
</html>